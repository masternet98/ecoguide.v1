# EcoGuide.v1 ì¢…í•© ê°œë°œ ê°€ì´ë“œë¼ì¸

## ğŸ“– ê°œìš”

ì´ ë¬¸ì„œëŠ” EcoGuide.v1 í”„ë¡œì íŠ¸ì˜ **ì „ì²´ì ì¸ ê°œë°œ ì² í•™ê³¼ ì‹¤ìš©ì ì¸ ê°€ì´ë“œë¼ì¸**ì„ ì œê³µí•©ë‹ˆë‹¤. ë‹¨ìˆœí•œ ì½”ë”© ê·œì¹™ì„ ë„˜ì–´ì„œ í”„ë¡œì íŠ¸ì˜ ëª©ì , ì„¤ê³„ ì² í•™, ê·¸ë¦¬ê³  ì‹¤ì œ ê°œë°œ ì‹œ ë§ˆì£¼í•˜ëŠ” ë‹¤ì–‘í•œ ìƒí™©ì— ëŒ€í•œ ì§€ì¹¨ì„ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.

---

## ğŸ¯ í”„ë¡œì íŠ¸ ë¹„ì „ê³¼ ëª©í‘œ

### í”„ë¡œì íŠ¸ ëª©ì 
EcoGuide.v1ì€ **AI ê¸°ë°˜ ëŒ€í˜•íê¸°ë¬¼ ê´€ë¦¬ ë„ìš°ë¯¸**ë¡œì„œ:
- ì‹œë¯¼ë“¤ì´ ì‰½ê²Œ ëŒ€í˜•íê¸°ë¬¼ì„ ì‹ë³„í•˜ê³  ë°°ì¶œ ë°©ë²•ì„ ì•ˆë‚´
- ì§€ìì²´ë³„ ë°°ì¶œ ê·œì •ê³¼ ì—°ê²°í•˜ì—¬ ì •í™•í•œ ì •ë³´ ì œê³µ
- í™•ì¥ ê°€ëŠ¥í•œ AI í”Œë«í¼ìœ¼ë¡œ ë‹¤ì–‘í•œ í™˜ê²½ ê´€ë ¨ ì„œë¹„ìŠ¤ í†µí•©

### ì„¤ê³„ ì² í•™
1. **ì‚¬ìš©ì ì¤‘ì‹¬**: ë³µì¡í•œ í–‰ì • ì ˆì°¨ë¥¼ ë‹¨ìˆœí•˜ê²Œ
2. **í™•ì¥ì„±**: ìƒˆë¡œìš´ ì§€ì—­, ìƒˆë¡œìš´ ê¸°ëŠ¥ ì‰½ê²Œ ì¶”ê°€
3. **ì‹ ë¢°ì„±**: ì •í™•í•œ ì •ë³´ì™€ ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤
4. **ìœ ì§€ë³´ìˆ˜ì„±**: ì¥ê¸°ì ìœ¼ë¡œ ê´€ë¦¬ ê°€ëŠ¥í•œ ì½”ë“œë² ì´ìŠ¤

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ê°œìš”ì™€ ì„¤ê³„ ì›ì¹™

### ë„ë©”ì¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ ì„ íƒ ì´ìœ 

**ë¬¸ì œ**: ê¸°ì¡´ì˜ ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜(services/, components/)ëŠ” ê¸°ëŠ¥ì´ ëŠ˜ì–´ë‚ ìˆ˜ë¡ íŒŒì¼ì´ ë¬´ì‘ì • ì¦ê°€í•˜ì—¬ ê´€ë¦¬ê°€ ì–´ë ¤ì›Œì§

**í•´ê²°ì±…**: ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸ ì¤‘ì‹¬ìœ¼ë¡œ ì½”ë“œë¥¼ êµ¬ì¡°í™”í•˜ì—¬ ê´€ë ¨ ê¸°ëŠ¥ë“¤ì„ í•¨ê»˜ ê´€ë¦¬

### ìµœì¢… ë””ë ‰í„°ë¦¬ êµ¬ì¡°
```
src/
â”œâ”€ app/                     # ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ
â”‚  â”œâ”€ core/                # í•µì‹¬ ì‹œìŠ¤í…œ (íŒ©í† ë¦¬, ì˜¤ë¥˜ì²˜ë¦¬ ë“±)
â”‚  â”œâ”€ config/              # ì„¤ì • ê´€ë¦¬
â”‚  â””â”€ layouts/             # ê³µìš© ë ˆì´ì•„ì›ƒ
â”œâ”€ domains/                # ë„ë©”ì¸ ê³„ì¸µ (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
â”‚  â”œâ”€ analysis/           # ì´ë¯¸ì§€ ë¶„ì„ ë„ë©”ì¸
â”‚  â”‚  â”œâ”€ services/        # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚  â”‚  â”œâ”€ ui/             # UI ì»´í¬ë„ŒíŠ¸
â”‚  â”‚  â””â”€ vision_types.py # íƒ€ì… ì •ì˜
â”‚  â”œâ”€ prompts/           # í”„ë¡¬í”„íŠ¸ ê´€ë¦¬ ë„ë©”ì¸
â”‚  â”œâ”€ district/          # í–‰ì •êµ¬ì—­ ë°ì´í„° ë„ë©”ì¸
â”‚  â”œâ”€ monitoring/        # ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§ ë„ë©”ì¸
â”‚  â””â”€ infrastructure/    # ì¸í”„ë¼ ì„œë¹„ìŠ¤ ë„ë©”ì¸
â”œâ”€ pages/                # Streamlit ë©€í‹°í˜ì´ì§€
â”œâ”€ layouts/              # ë©”ì¸ ë ˆì´ì•„ì›ƒ
â””â”€ components/           # ë˜ê±°ì‹œ í˜¸í™˜ ê³„ì¸µ
```

## ğŸš« ì ˆëŒ€ ê¸ˆì§€ ì‚¬í•­ (NEVER DO)

### 1. ì˜ëª»ëœ ë””ë ‰í„°ë¦¬ ì‚¬ìš©
- âŒ `src/services/`ì— ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ìƒì„±
- âŒ `src/core/`ì— ìƒˆë¡œìš´ ëª¨ë“ˆ ìƒì„±
- âŒ ë„ë©”ì¸ ì™¸ë¶€ì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë°°ì¹˜

### 2. ì˜ëª»ëœ import ê²½ë¡œ
- âŒ `from src.services.*` ì‚¬ìš©
- âŒ `from src.core.config` ì‚¬ìš© (ì˜¬ë°”ë¦„: `from src.app.core.config`)
- âŒ ë„ë©”ì¸ ê°„ ì§ì ‘ ì„œë¹„ìŠ¤ import (ServiceFactory ì‚¬ìš© í•„ìˆ˜)

### 3. ì•„í‚¤í…ì²˜ ì›ì¹™ ìœ„ë°˜
- âŒ ë„ë©”ì¸ ê°„ ìˆœí™˜ ì°¸ì¡° ìƒì„±
- âŒ UI ë¡œì§ì„ ì„œë¹„ìŠ¤ì— í¬í•¨
- âŒ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ UIì— í¬í•¨

### ê° ë„ë©”ì¸ì˜ ì—­í• ê³¼ ì±…ì„

#### 1. Analysis Domain (ì´ë¯¸ì§€ ë¶„ì„)
- **ëª©ì **: ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ ì´ë¯¸ì§€ë¥¼ AIë¡œ ë¶„ì„
- **í•µì‹¬ ê¸°ëŠ¥**: OpenAI Vision API ì—°ë™, ë¡œì»¬ ë¹„ì „ íŒŒì´í”„ë¼ì¸
- **í™•ì¥ ë°©í–¥**: ë” ì •êµí•œ ê°ì²´ ì¸ì‹, í¬ê¸° ì¸¡ì • ê°œì„ 

#### 2. Prompts Domain (í”„ë¡¬í”„íŠ¸ ê´€ë¦¬)
- **ëª©ì **: AIì—ê²Œ ì „ë‹¬í•  í”„ë¡¬í”„íŠ¸ë¥¼ ê´€ë¦¬í•˜ê³  ìµœì í™”
- **í•µì‹¬ ê¸°ëŠ¥**: ë™ì  í”„ë¡¬í”„íŠ¸ ìƒì„±, í…œí”Œë¦¿ ê´€ë¦¬, A/B í…ŒìŠ¤íŠ¸
- **í™•ì¥ ë°©í–¥**: ì§€ì—­ë³„ íŠ¹í™” í”„ë¡¬í”„íŠ¸, ì„±ëŠ¥ ë¶„ì„

#### 3. District Domain (í–‰ì •êµ¬ì—­ ë°ì´í„°)
- **ëª©ì **: ì „êµ­ ì§€ìì²´ì˜ ëŒ€í˜•íê¸°ë¬¼ ë°°ì¶œ ê·œì • ê´€ë¦¬
- **í•µì‹¬ ê¸°ëŠ¥**: í–‰ì •êµ¬ì—­ ë°ì´í„° ë™ê¸°í™”, ë°°ì¶œ ë§í¬ ìˆ˜ì§‘
- **í™•ì¥ ë°©í–¥**: ì‹¤ì‹œê°„ ê·œì • ë³€ê²½ ê°ì§€, ë°°ì¶œ ë¹„ìš© ê³„ì‚°

#### 4. Monitoring Domain (ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§)
- **ëª©ì **: ì‹œìŠ¤í…œ ìƒíƒœ ì¶”ì  ë° ë¬¸ì œ ì¡°ê¸° ë°œê²¬
- **í•µì‹¬ ê¸°ëŠ¥**: ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§, ì˜¤ë¥˜ ì¶”ì , ì•Œë¦¼ ë°œì†¡
- **í™•ì¥ ë°©í–¥**: ì˜ˆì¸¡ì  ëª¨ë‹ˆí„°ë§, ìë™ ë³µêµ¬

#### 5. Infrastructure Domain (ì¸í”„ë¼ ì„œë¹„ìŠ¤)
- **ëª©ì **: ë‹¤ë¥¸ ë„ë©”ì¸ë“¤ì´ í•„ìš”ë¡œ í•˜ëŠ” ê³µí†µ ì¸í”„ë¼ ì œê³µ
- **í•µì‹¬ ê¸°ëŠ¥**: ê²€ìƒ‰, íŒŒì¼ ê´€ë¦¬, ë„¤íŠ¸ì›Œí¬ í„°ë„, ë°°ì¹˜ ì‘ì—…
- **í™•ì¥ ë°©í–¥**: í´ë¼ìš°ë“œ ì—°ë™, ìºì‹±, ë³´ì•ˆ

---

## âœ… í•„ìˆ˜ ì¤€ìˆ˜ ì‚¬í•­ (MUST DO)

### 1. ìƒˆë¡œìš´ ê¸°ëŠ¥ ê°œë°œ ì‹œ

#### Step 1: ë„ë©”ì¸ ë¶„ë¥˜
ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ê°œë°œí•  ë•Œ ë°˜ë“œì‹œ ë‹¤ìŒ ê¸°ì¤€ìœ¼ë¡œ ë„ë©”ì¸ì„ ê²°ì •:

```python
# ë„ë©”ì¸ ë¶„ë¥˜ ì²´í¬ë¦¬ìŠ¤íŠ¸
if "ì´ë¯¸ì§€ ë¶„ì„" or "AI ë¹„ì „" or "OpenAI":
    domain = "analysis"
elif "í”„ë¡¬í”„íŠ¸" or "AI í…ìŠ¤íŠ¸" or "í…œí”Œë¦¿":
    domain = "prompts"
elif "í–‰ì •êµ¬ì—­" or "ìœ„ì¹˜" or "ì§€ì—­":
    domain = "district"
elif "ëª¨ë‹ˆí„°ë§" or "ì•Œë¦¼" or "ë¡œê¹…":
    domain = "monitoring"
elif "ê²€ìƒ‰" or "í„°ë„" or "ë°°ì¹˜" or "íŒŒì¼ê´€ë¦¬":
    domain = "infrastructure"
else:
    # ìƒˆë¡œìš´ ë„ë©”ì¸ ìƒì„± í•„ìš” - ì•„í‚¤í…íŠ¸ì™€ ìƒì˜
    raise Exception("ë„ë©”ì¸ ë¶„ë¥˜ í•„ìš”")
```

#### Step 2: íŒŒì¼ ë°°ì¹˜
```python
# ì˜¬ë°”ë¥¸ íŒŒì¼ ë°°ì¹˜
src/domains/{domain}/
â”œâ”€ services/           # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ
â”‚  â”œâ”€ {feature}_service.py
â”‚  â”œâ”€ {feature}_manager.py
â”‚  â””â”€ {feature}_processor.py
â”œâ”€ ui/                # UI ì»´í¬ë„ŒíŠ¸ë§Œ
â”‚  â”œâ”€ {feature}_ui.py
â”‚  â”œâ”€ {feature}_dashboard.py
â”‚  â””â”€ {feature}_form.py
â””â”€ types.py           # íƒ€ì… ì •ì˜ (ì„ íƒì )
```

#### Step 3: Import íŒ¨í„´
```python
# âœ… ì˜¬ë°”ë¥¸ import íŒ¨í„´
from src.app.core.config import Config
from src.domains.{domain}.services.{service} import {ServiceClass}

# âœ… ServiceFactoryë¥¼ í†µí•œ ì„œë¹„ìŠ¤ ì ‘ê·¼
def some_function(app_context):
    service = app_context.get_service('service_name')
    return service.method()

# âŒ ì˜ëª»ëœ ì§ì ‘ import
from src.domains.other_domain.services.other_service import OtherService
```

## ğŸ› ï¸ ì½”ë“œ íŒ¨í„´ ë° í…œí”Œë¦¿

### ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ êµ¬ì¡°
```python
# src/domains/{domain}/services/{feature}_service.py
"""
{Feature} ë„ë©”ì¸ì˜ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.
"""
from typing import Any, Dict, Optional
from src.app.core.base_service import BaseService
from src.app.core.config import Config

class {Feature}Service(BaseService):
    """
    {Feature} ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

    ì´ ì„œë¹„ìŠ¤ëŠ” ë‹¤ìŒ ì±…ì„ì„ ê°€ì§‘ë‹ˆë‹¤:
    1. {ê¸°ëŠ¥ 1}
    2. {ê¸°ëŠ¥ 2}
    3. {ê¸°ëŠ¥ 3}
    """

    def __init__(self, config: Config):
        super().__init__(config)
        self.feature_config = config.{domain}

    def process_{feature}(self, data: Dict[str, Any]) -> Dict[str, Any]:
        """
        {ê¸°ëŠ¥} ì²˜ë¦¬ ë©”ì¸ ë©”ì„œë“œ

        Args:
            data: ì²˜ë¦¬í•  ë°ì´í„°

        Returns:
            ì²˜ë¦¬ ê²°ê³¼
        """
        # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ í¬í•¨
        pass
```

### UI ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```python
# src/domains/{domain}/ui/{feature}_ui.py
"""
{Feature} ë„ë©”ì¸ì˜ UI ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.
"""
import streamlit as st
from src.app.core.base_component import BaseUIComponent

class {Feature}UI(BaseUIComponent):
    """
    {Feature} ê´€ë ¨ UIë¥¼ ë‹´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.
    """

    def __init__(self, app_context):
        super().__init__(app_context)
        self.service = self.get_service('{feature}_service')

    def render(self) -> None:
        """UI ë Œë”ë§ ë©”ì„œë“œ"""
        # UI ë¡œì§ë§Œ í¬í•¨
        pass
```

### ServiceFactory ë“±ë¡
ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ ë•Œ ë°˜ë“œì‹œ ServiceFactoryì— ë“±ë¡:

```python
# src/app/core/service_factory.pyì˜ SERVICE_DOMAIN_MAPì— ì¶”ê°€
SERVICE_DOMAIN_MAP = {
    # ê¸°ì¡´ ì„œë¹„ìŠ¤ë“¤...
    '{new_service_name}': '{domain}',  # ìƒˆ ì„œë¹„ìŠ¤ ì¶”ê°€
}
```

### í˜ì´ì§€ ê°œë°œ ê·œì¹™
```python
# pages/{number}_{page_name}.py
"""
{Page} í˜ì´ì§€ì…ë‹ˆë‹¤.
"""
import streamlit as st
from src.app.core.config import load_config
from src.domains.{domain}.ui.{feature}_ui import {Feature}UI

# í˜ì´ì§€ ì„¤ì • (í•„ìˆ˜)
st.set_page_config(
    page_title="{Page Title} - EcoGuide",
    page_icon="ğŸ”§",
    layout="wide"
)

# Config ë¡œë“œ (í•„ìˆ˜)
config = load_config()

# UI ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©
ui_component = {Feature}UI(app_context)
ui_component.render()
```

---

## ğŸ“‹ ê°œë°œ ì‹œë‚˜ë¦¬ì˜¤ë³„ ê°€ì´ë“œ

### ì‹œë‚˜ë¦¬ì˜¤ 1: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€í•˜ê¸°

#### ì˜ˆì‹œ: "ìŒì„± ì¸ì‹ ê¸°ëŠ¥" ì¶”ê°€

1. **ë„ë©”ì¸ ë¶„ë¥˜ ì§ˆë¬¸**:
   - ì´ ê¸°ëŠ¥ì´ ì£¼ë¡œ ì–´ë–¤ ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜ë¥¼ ì œê³µí•˜ëŠ”ê°€?
   - ê¸°ì¡´ ë„ë©”ì¸ ì¤‘ ì–´ë””ì™€ ê°€ì¥ ë°€ì ‘í•œê°€?
   - ì™„ì „íˆ ìƒˆë¡œìš´ ì˜ì—­ì¸ê°€?

2. **ë‹µë³€ ì˜ˆì‹œ**:
   - ìŒì„±ìœ¼ë¡œ ëŒ€í˜•íê¸°ë¬¼ì„ ì„¤ëª…í•˜ë©´ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜ â†’ Analysis ë„ë©”ì¸
   - ì´ìœ : ì‚¬ìš©ì ì…ë ¥ì„ AIê°€ ì´í•´í•  ìˆ˜ ìˆê²Œ ë³€í™˜í•˜ëŠ” ê²ƒì´ í•µì‹¬

3. **êµ¬í˜„ ìœ„ì¹˜**:
   ```
   src/domains/analysis/
   â”œâ”€ services/
   â”‚  â”œâ”€ vision_service.py     # ê¸°ì¡´
   â”‚  â”œâ”€ openai_service.py     # ê¸°ì¡´
   â”‚  â””â”€ speech_service.py     # ìƒˆë¡œ ì¶”ê°€
   â””â”€ ui/
      â”œâ”€ image_input.py        # ê¸°ì¡´
      â””â”€ voice_input.py        # ìƒˆë¡œ ì¶”ê°€
   ```

#### ì˜ˆì‹œ: "ì‚¬ìš©ì ê³„ì • ê´€ë¦¬" ì¶”ê°€

1. **ë„ë©”ì¸ ë¶„ë¥˜ ì§ˆë¬¸**:
   - ê¸°ì¡´ 5ê°œ ë„ë©”ì¸ê³¼ëŠ” ì™„ì „íˆ ë‹¤ë¥¸ ì˜ì—­
   - ìƒˆë¡œìš´ ë„ë©”ì¸ì´ í•„ìš”í•œê°€?

2. **íŒë‹¨ ê¸°ì¤€**:
   - 3ê°œ ì´ìƒì˜ ì„œë¹„ìŠ¤/UIê°€ í•„ìš”í•œê°€? â†’ Yes
   - ë…ë¦½ì ìœ¼ë¡œ ë°œì „í•  ê°€ëŠ¥ì„±ì´ ìˆëŠ”ê°€? â†’ Yes
   - ë‹¤ë¥¸ ë„ë©”ì¸ë“¤ì´ ì˜ì¡´í•  ê°€ëŠ¥ì„±ì´ ìˆëŠ”ê°€? â†’ Yes

3. **ê²°ì •**: ìƒˆë¡œìš´ `user` ë„ë©”ì¸ ìƒì„±

### ì‹œë‚˜ë¦¬ì˜¤ 2: ê¸°ì¡´ ê¸°ëŠ¥ ê°œì„ í•˜ê¸°

#### ì˜ˆì‹œ: "ì´ë¯¸ì§€ ë¶„ì„ ì†ë„ ê°œì„ "

1. **ì˜í–¥ ë²”ìœ„ ë¶„ì„**:
   - ì£¼ë¡œ ì˜í–¥ë°›ëŠ” ë„ë©”ì¸: Analysis
   - ê°„ì ‘ì  ì˜í–¥: Monitoring (ì„±ëŠ¥ ì§€í‘œ)

2. **ì ‘ê·¼ ë°©ë²•**:
   ```python
   # src/domains/analysis/services/vision_service.py
   class VisionService:
       def analyze_image_fast(self, image_data):
           # ìƒˆë¡œìš´ ë¹ ë¥¸ ë¶„ì„ ë°©ë²•
           pass

       def analyze_image(self, image_data):
           # ê¸°ì¡´ ë°©ë²• ìœ ì§€ (í•˜ìœ„ í˜¸í™˜ì„±)
           pass
   ```

3. **ëª¨ë‹ˆí„°ë§ ì—°ë™**:
   ```python
   # src/domains/monitoring/services/performance_service.py
   def track_analysis_performance(self, analysis_time, method):
       # ì„±ëŠ¥ ì§€í‘œ ìˆ˜ì§‘
   ```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™í•˜ê¸°

#### ì˜ˆì‹œ: "ìƒˆë¡œìš´ AI ëª¨ë¸ API ì—°ë™"

1. **ê¸°ì¡´ íŒ¨í„´ í™•ì¸**:
   - OpenAI API ì—°ë™ì´ ì–´ë–»ê²Œ êµ¬í˜„ë˜ì–´ ìˆëŠ”ì§€ ì°¸ê³ 
   - ìœ ì‚¬í•œ íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„í•˜ì—¬ ì¼ê´€ì„± ìœ ì§€

2. **ì„¤ì • ê´€ë¦¬**:
   ```python
   # src/app/core/config.py
   @dataclass
   class Config:
       # ê¸°ì¡´ ì„¤ì •ë“¤...
       new_ai_api_key: Optional[str] = field(default_factory=lambda: os.environ.get('NEW_AI_API_KEY'))
       new_ai_model: str = "default-model"
   ```

3. **ì„œë¹„ìŠ¤ êµ¬í˜„**:
   ```python
   # src/domains/analysis/services/new_ai_service.py
   class NewAIService(BaseService):
       def __init__(self, config: Config):
           super().__init__(config)
           self.api_key = config.new_ai_api_key
   ```

---

## ğŸš¦ ì˜ì‚¬ê²°ì • ê°€ì´ë“œë¼ì¸

### ìƒˆë¡œìš´ íŒŒì¼ì„ ì–´ë””ì— ë‘˜ê¹Œ?

#### 1ë‹¨ê³„: ë„ë©”ì¸ ì‹ë³„
```python
def identify_domain(feature_description):
    """ê¸°ëŠ¥ ì„¤ëª…ì„ ë°”íƒ•ìœ¼ë¡œ ë„ë©”ì¸ì„ ì‹ë³„í•©ë‹ˆë‹¤."""

    # í•µì‹¬ ì§ˆë¬¸ë“¤
    questions = [
        "ì´ ê¸°ëŠ¥ì˜ ì£¼ëœ ëª©ì ì´ ë¬´ì—‡ì¸ê°€?",
        "ì‚¬ìš©ìì—ê²Œ ì–´ë–¤ ê°€ì¹˜ë¥¼ ì œê³µí•˜ëŠ”ê°€?",
        "ì–´ë–¤ ë°ì´í„°ë¥¼ ì£¼ë¡œ ë‹¤ë£¨ëŠ”ê°€?",
        "ê¸°ì¡´ ì–´ë–¤ ê¸°ëŠ¥ê³¼ ê°€ì¥ ë°€ì ‘í•œê°€?"
    ]

    # í‚¤ì›Œë“œ ê¸°ë°˜ ë¶„ë¥˜ (ì°¸ê³ ìš©)
    keywords_map = {
        "analysis": ["ì´ë¯¸ì§€", "ë¶„ì„", "AI", "ë¹„ì „", "ì¸ì‹", "ì¸¡ì •"],
        "prompts": ["í”„ë¡¬í”„íŠ¸", "í…œí”Œë¦¿", "í…ìŠ¤íŠ¸", "ì§€ì‹œì‚¬í•­"],
        "district": ["í–‰ì •êµ¬ì—­", "ì§€ì—­", "ì‹œêµ°êµ¬", "ë°°ì¶œ", "ê·œì •"],
        "monitoring": ["ëª¨ë‹ˆí„°ë§", "ì¶”ì ", "ì•Œë¦¼", "ì„±ëŠ¥", "ë¡œê·¸"],
        "infrastructure": ["ê²€ìƒ‰", "íŒŒì¼", "ë„¤íŠ¸ì›Œí¬", "ì‹œìŠ¤í…œ", "ìœ í‹¸ë¦¬í‹°"]
    }

    # ì‹¤ì œë¡œëŠ” ë§¥ë½ê³¼ ëª©ì ì„ ê³ ë ¤í•˜ì—¬ íŒë‹¨
```

#### 2ë‹¨ê³„: íŒŒì¼ ìœ í˜• ê²°ì •
```python
def decide_file_type(functionality):
    """ê¸°ëŠ¥ì˜ ì„±ê²©ì— ë”°ë¼ íŒŒì¼ ìœ í˜•ì„ ê²°ì •í•©ë‹ˆë‹¤."""

    if "ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§" or "ì™¸ë¶€ API":
        return "services/"
    elif "UI ì»´í¬ë„ŒíŠ¸" or "ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤":
        return "ui/"
    elif "ë°ì´í„° íƒ€ì…" or "ìƒìˆ˜":
        return "types.py"
    else:
        return "unclear - ì¬ê²€í†  í•„ìš”"
```

### ê¸°ì¡´ ì½”ë“œë¥¼ ìˆ˜ì •í• ê¹Œ ìƒˆë¡œ ë§Œë“¤ê¹Œ?

#### ìˆ˜ì •í•˜ëŠ” ê²½ìš° (ê¶Œì¥)
- ë™ì¼í•œ ë„ë©”ì¸ ë‚´ì—ì„œ ìœ ì‚¬í•œ ê¸°ëŠ¥
- ê¸°ì¡´ ì¸í„°í˜ì´ìŠ¤ë¥¼ í™•ì¥í•˜ëŠ” ê²½ìš°
- ì„±ëŠ¥ ê°œì„ ì´ë‚˜ ë²„ê·¸ ìˆ˜ì •

#### ìƒˆë¡œ ë§Œë“œëŠ” ê²½ìš°
- ì™„ì „íˆ ë‹¤ë¥¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- ê¸°ì¡´ ì½”ë“œê°€ ë„ˆë¬´ ë³µì¡í•´ì§ˆ ìš°ë ¤
- ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ê°€ í•„ìš”í•œ ê²½ìš°

### ì˜ì¡´ì„±ì„ ì–´ë–»ê²Œ ê´€ë¦¬í• ê¹Œ?

#### ì›ì¹™
1. **ë„ë©”ì¸ ë‚´ë¶€**: ììœ ë¡œìš´ ì˜ì¡´ì„±
2. **ë„ë©”ì¸ ê°„**: ServiceFactoryë¥¼ í†µí•´ì„œë§Œ
3. **ì•± ê³„ì¸µ**: ëª¨ë“  ë„ë©”ì¸ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥
4. **ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬**: ìµœì†Œí•œìœ¼ë¡œ, í•„ìš”ì‹œ ì¶”ìƒí™”

#### ì˜ˆì‹œ
```python
# âœ… ì˜¬ë°”ë¥¸ ì˜ì¡´ì„±
class AnalysisUI(BaseUIComponent):
    def __init__(self, app_context):
        super().__init__(app_context)
        # ê°™ì€ ë„ë©”ì¸ ë‚´ ì§ì ‘ import
        from .analysis_helper import format_result
        # ë‹¤ë¥¸ ë„ë©”ì¸ì€ ServiceFactory í†µí•´ì„œ
        self.district_service = self.get_service('district_service')

# âŒ ì˜ëª»ëœ ì˜ì¡´ì„±
from src.domains.district.services.district_service import DistrictService
```

---

## ğŸ› ï¸ ì‹¤ìš©ì ì¸ ê°œë°œ íŒ

### ë””ë²„ê¹…ê³¼ ë¬¸ì œ í•´ê²°

#### 1. Import ì˜¤ë¥˜ê°€ ë°œìƒí•  ë•Œ
```bash
# 1ë‹¨ê³„: íŒŒì¼ì´ ì˜¬ë°”ë¥¸ ìœ„ì¹˜ì— ìˆëŠ”ì§€ í™•ì¸
find src -name "*.py" | grep <íŒŒì¼ëª…>

# 2ë‹¨ê³„: __init__.py íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸
find src -name "__init__.py"

# 3ë‹¨ê³„: ê²½ë¡œê°€ ë§ëŠ”ì§€ í™•ì¸
python -c "from src.domains.analysis.services.vision_service import VisionService"
```

#### 2. ServiceFactoryì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì„ ë•Œ
```python
# 1ë‹¨ê³„: SERVICE_DOMAIN_MAP í™•ì¸
# src/app/core/service_factory.py
SERVICE_DOMAIN_MAP = {
    'vision_service': 'analysis',  # ì´ ë§¤í•‘ì´ ìˆëŠ”ê°€?
}

# 2ë‹¨ê³„: ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ëª… í™•ì¸
# íŒŒì¼ëª…: vision_service.py
# í´ë˜ìŠ¤ëª…: VisionService (ì¼ì¹˜í•˜ëŠ”ê°€?)
```

#### 3. í˜ì´ì§€ê°€ í‘œì‹œë˜ì§€ ì•Šì„ ë•Œ
```python
# 1ë‹¨ê³„: íŒŒì¼ëª… í™•ì¸ (pages/01_page_name.py)
# 2ë‹¨ê³„: st.set_page_config() í˜¸ì¶œ í™•ì¸
# 3ë‹¨ê³„: ì˜¤ë¥˜ ë¡œê·¸ í™•ì¸
streamlit run app.py --logger.level=debug
```

### ì„±ëŠ¥ ìµœì í™”

#### 1. Streamlit ìºì‹± í™œìš©
```python
@st.cache_data
def expensive_computation(data):
    # ë¬´ê±°ìš´ ê³„ì‚°
    return result

@st.cache_resource
def load_model():
    # ëª¨ë¸ ë¡œë”© (í•œ ë²ˆë§Œ)
    return model
```

#### 2. ì§€ì—° ë¡œë”© (Lazy Loading)
```python
class VisionService:
    def __init__(self, config):
        self.config = config
        self._model = None  # ì§€ì—° ì´ˆê¸°í™”

    @property
    def model(self):
        if self._model is None:
            self._model = self._load_model()
        return self._model
```

### í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œ

#### 1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (ê° ë„ë©”ì¸ë³„)
```python
# test/domains/analysis/test_vision_service.py
class TestVisionService:
    def test_analyze_image_success(self):
        # ì„±ê³µ ì¼€ì´ìŠ¤
        pass

    def test_analyze_image_invalid_input(self):
        # ì‹¤íŒ¨ ì¼€ì´ìŠ¤
        pass
```

#### 2. í†µí•© í…ŒìŠ¤íŠ¸
```python
# test/integration/test_analysis_flow.py
def test_full_analysis_pipeline():
    # ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
    pass
```

#### 3. UI í…ŒìŠ¤íŠ¸ (ìˆ˜ë™ ì²´í¬ë¦¬ìŠ¤íŠ¸)
- [ ] ëª¨ë“  í˜ì´ì§€ê°€ ë¡œë“œë˜ëŠ”ê°€?
- [ ] ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ì ì ˆíˆ í‘œì‹œë˜ëŠ”ê°€?
- [ ] ì‚¬ìš©ì ì…ë ¥ì´ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬ë˜ëŠ”ê°€?

---

## ğŸ”’ ë³´ì•ˆ ë° ìš´ì˜ ê°€ì´ë“œë¼ì¸

### API í‚¤ ê´€ë¦¬

#### 1. ë¡œì»¬ ê°œë°œ
```bash
# .env íŒŒì¼ (ì €ì¥ì†Œì— ì»¤ë°‹í•˜ì§€ ë§ê²ƒ!)
OPENAI_API_KEY=sk-...
GOOGLE_CSE_API_KEY=...
```

#### 2. ë°°í¬ í™˜ê²½
```toml
# .streamlit/secrets.toml
[general]
OPENAI_API_KEY = "sk-..."
GOOGLE_CSE_API_KEY = "..."
```

#### 3. ì½”ë“œì—ì„œ ì‚¬ìš©
```python
# âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
from src.app.core.config import load_config
config = load_config()
api_key = config.openai_api_key

# âŒ ì˜ëª»ëœ ë°©ë²•
api_key = "sk-hardcoded-key"  # ì ˆëŒ€ í•˜ì§€ ë§ê²ƒ
```

### ì—ëŸ¬ ì²˜ë¦¬

#### 1. ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€
```python
try:
    result = some_api_call()
except APIError as e:
    st.error("ì£„ì†¡í•©ë‹ˆë‹¤. ì¼ì‹œì ì¸ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.")
    logger.error(f"API call failed: {e}")
```

#### 2. ìš°ì•„í•œ ê¸°ëŠ¥ ì €í•˜ (Graceful Degradation)
```python
def analyze_image(image):
    try:
        return ai_analysis(image)
    except ModelNotAvailable:
        st.warning("AI ë¶„ì„ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê¸°ë³¸ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.")
        return basic_analysis(image)
```

### ë¡œê¹…

#### 1. ì ì ˆí•œ ë¡œê·¸ ë ˆë²¨
```python
logger.debug("ìƒì„¸í•œ ë””ë²„ê·¸ ì •ë³´")      # ê°œë°œì‹œì—ë§Œ
logger.info("ì¼ë°˜ì ì¸ ë™ì‘ ì •ë³´")       # ìš´ì˜ ëª¨ë‹ˆí„°ë§ìš©
logger.warning("ì£¼ì˜ê°€ í•„ìš”í•œ ìƒí™©")    # ë¬¸ì œ ì§•í›„
logger.error("ì˜¤ë¥˜ ë°œìƒ")             # ì¦‰ì‹œ ëŒ€ì‘ í•„ìš”
```

#### 2. êµ¬ì¡°í™”ëœ ë¡œê¹…
```python
logger.info("Image analysis completed", extra={
    "user_id": user_id,
    "image_size": len(image_data),
    "analysis_time": elapsed_time,
    "model_used": model_name
})
```

---

## ğŸ“ˆ í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

### ìƒˆë¡œìš´ ì§€ì—­ ì¶”ê°€

#### 1. êµ­ì œí™” ì¤€ë¹„
```python
# src/domains/district/services/region_service.py
class RegionService:
    def get_waste_rules(self, country, region):
        # êµ­ê°€ë³„ ê·œì • ë¡œë”©
        pass
```

#### 2. ë‹¤êµ­ì–´ ì§€ì›
```python
# src/app/core/i18n.py
def get_text(key, language='ko'):
    translations = {
        'ko': {'welcome': 'í™˜ì˜í•©ë‹ˆë‹¤'},
        'en': {'welcome': 'Welcome'}
    }
    return translations[language][key]
```

### ìƒˆë¡œìš´ AI ëª¨ë¸ í†µí•©

#### 1. ëª¨ë¸ ì¶”ìƒí™”
```python
# src/domains/analysis/services/base_ai_service.py
class BaseAIService(ABC):
    @abstractmethod
    def analyze_image(self, image): pass

    @abstractmethod
    def get_model_info(self): pass
```

#### 2. ëª¨ë¸ ì„ íƒ ë¡œì§
```python
def select_best_model(image_type, quality_requirement):
    # ì´ë¯¸ì§€ íŠ¹ì„±ê³¼ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ ìµœì  ëª¨ë¸ ì„ íƒ
    pass
```

### ëŒ€ìš©ëŸ‰ ì²˜ë¦¬

#### 1. ë°°ì¹˜ ì²˜ë¦¬
```python
# src/domains/infrastructure/services/batch_service.py
def process_large_dataset(data_chunks):
    for chunk in data_chunks:
        yield process_chunk(chunk)
```

#### 2. ìºì‹± ì „ëµ
```python
@st.cache_data(ttl=3600)  # 1ì‹œê°„ ìºì‹œ
def get_district_data(region_code):
    # ìì£¼ ì¡°íšŒë˜ëŠ” ë°ì´í„° ìºì‹±
    pass
```

---

## ğŸ“ í•™ìŠµ ë¦¬ì†ŒìŠ¤

### ìƒˆë¡œìš´ ê°œë°œìë¥¼ ìœ„í•œ í•™ìŠµ ìˆœì„œ

#### 1ì£¼ì°¨: ê¸°ë³¸ ì´í•´
- [ ] í”„ë¡œì íŠ¸ ëª©ì ê³¼ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ íŒŒì•…
- [ ] ë¡œì»¬ í™˜ê²½ ì„¤ì • ë° ì•± ì‹¤í–‰
- [ ] ê° í˜ì´ì§€ ê¸°ëŠ¥ ì²´í—˜

#### 2ì£¼ì°¨: ì•„í‚¤í…ì²˜ ì´í•´
- [ ] ë„ë©”ì¸ë³„ ì—­í• ê³¼ ì±…ì„ íŒŒì•…
- [ ] ì£¼ìš” ì„œë¹„ìŠ¤ë“¤ì˜ ë™ì‘ ë°©ì‹ ì´í•´
- [ ] ì„¤ì • ì‹œìŠ¤í…œê³¼ ì˜ì¡´ì„± ì£¼ì… íŒ¨í„´ í•™ìŠµ

#### 3ì£¼ì°¨: ì²« ê¸°ì—¬
- [ ] ê°„ë‹¨í•œ UI ê°œì„  ì‘ì—…
- [ ] ê¸°ì¡´ ê¸°ëŠ¥ì— ì‘ì€ ê°œì„ ì‚¬í•­ ì¶”ê°€
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ì—°ìŠµ

#### 4ì£¼ì°¨ ì´í›„: ë…ë¦½ì  ê°œë°œ
- [ ] ìƒˆë¡œìš´ ê¸°ëŠ¥ ì„¤ê³„ ë° êµ¬í˜„
- [ ] ì„±ëŠ¥ ìµœì í™” ì‘ì—…
- [ ] ë³µì¡í•œ í†µí•© ì‘ì—…

### ì¶”ì²œ í•™ìŠµ ìë£Œ

#### Streamlit ê´€ë ¨
- [Streamlit ê³µì‹ ë¬¸ì„œ](https://docs.streamlit.io/)
- [Streamlit ëª¨ë²” ì‚¬ë¡€](https://docs.streamlit.io/library/advanced-features)

#### Python ì•„í‚¤í…ì²˜
- Clean Architecture in Python
- Domain-Driven Design ê¸°ì´ˆ

#### AI/ML í†µí•©
- OpenAI API ê³µì‹ ë¬¸ì„œ
- Computer Vision ê¸°ì´ˆ

---

## ğŸ”„ ì§€ì†ì  ê°œì„ 

### ì •ê¸° ë¦¬ë·° í¬ì¸íŠ¸

#### ë§¤ì›”
- [ ] ì„±ëŠ¥ ì§€í‘œ ê²€í†  (ì‘ë‹µ ì‹œê°„, ì •í™•ë„)
- [ ] ì‚¬ìš©ì í”¼ë“œë°± ë¶„ì„
- [ ] ë³´ì•ˆ ì—…ë°ì´íŠ¸ í™•ì¸

#### ë¶„ê¸°ë³„
- [ ] ì•„í‚¤í…ì²˜ ê°œì„ ì  ê²€í† 
- [ ] ìƒˆë¡œìš´ ê¸°ìˆ  ë„ì… ê²€í† 
- [ ] íŒ€ í”„ë¡œì„¸ìŠ¤ ê°œì„ 

#### ì—°ê°„
- [ ] ì „ì²´ ê¸°ìˆ  ìŠ¤íƒ ì¬í‰ê°€
- [ ] í™•ì¥ì„± ê³„íš ìˆ˜ë¦½
- [ ] ì¥ê¸° ë¡œë“œë§µ ì—…ë°ì´íŠ¸

### í”¼ë“œë°± ë£¨í”„

#### 1. ì‚¬ìš©ì í”¼ë“œë°±
- Streamlit ì•± ë‚´ í”¼ë“œë°± í¼
- ì‚¬ìš© íŒ¨í„´ ë¶„ì„
- ì˜¤ë¥˜ ë¦¬í¬íŠ¸ ëª¨ë‹ˆí„°ë§

#### 2. ê°œë°œì í”¼ë“œë°±
- ì½”ë“œ ë¦¬ë·° ê³¼ì •ì—ì„œì˜ ê°œì„ ì 
- ê°œë°œ ìƒì‚°ì„± ì§€í‘œ
- ê¸°ìˆ  ë¶€ì±„ ì¶”ì 

#### 3. ì‹œìŠ¤í…œ í”¼ë“œë°±
- ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ê²°ê³¼
- ìë™í™”ëœ í…ŒìŠ¤íŠ¸ ê²°ê³¼
- ë³´ì•ˆ ìŠ¤ìº” ê²°ê³¼

---

**ğŸ“ ì‘ì„±ì¼**: 2025-09-23
**ğŸ”„ ë²„ì „**: 1.0
**ğŸ¯ ëª©ì **: ì‹¤ìš©ì ì´ê³  í¬ê´„ì ì¸ ê°œë°œ ê°€ì´ë“œ ì œê³µ
**ğŸ“– ëŒ€ìƒ**: ëª¨ë“  ê°œë°œì ë° AI ì–´ì‹œìŠ¤í„´íŠ¸