# ì„¸ë¶€ë‚´ì—­ ë§ˆí¬ë‹¤ìš´ ë³€ìˆ˜ ì£¼ì… ê°€ì´ë“œ

## ê°œìš”

ì„¸ë¶€ë‚´ì—­ ì„œë¹„ìŠ¤ëŠ” ì›¹í˜ì´ì§€ ì½˜í…ì¸ ë¥¼ AIë¡œ ë¶„ì„í•˜ì—¬ **ë§ˆí¬ë‹¤ìš´ í˜•ì‹**ìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤. ì´ ë§ˆí¬ë‹¤ìš´ ì½˜í…ì¸ ëŠ” í–¥í›„ ë°°ì¶œì •ë³´ ì•ˆë‚´ ë° ì‚¬ìš©ì ê°€ì´ë“œ í…œí”Œë¦¿ì— ë³€ìˆ˜ë¡œ ì£¼ì…ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì €ì¥ êµ¬ì¡°

### ì €ì¥ ê²½ë¡œ
```
uploads/waste_links/detail_contents.json
```

### ë°ì´í„° êµ¬ì¡°

```json
{
  "metadata": {
    "version": "1.0",
    "created_at": "2025-10-27T16:08:29",
    "last_updated": "2025-10-27T16:08:29"
  },
  "contents": {
    "ì§€ì—­í‚¤": {
      "info_detail": {
        "content": "ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë°°ì¶œì •ë³´ ì½˜í…ì¸ ",
        "created_at": "2025-10-27T16:08:29",
        "source": "ai_analyzed"
      },
      "fee_detail": {
        "content": "ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ìˆ˜ìˆ˜ë£Œ ì½˜í…ì¸ ",
        "created_at": "2025-10-27T16:08:29",
        "source": "ai_analyzed"
      },
      "managed_at": "2025-10-27T16:08:29"
    }
  }
}
```

## ë§ˆí¬ë‹¤ìš´ ì½˜í…ì¸  í˜•ì‹

### ë°°ì¶œì •ë³´ (info) í˜•ì‹

```markdown
## ğŸ“¦ ë°°ì¶œ ê°€ëŠ¥ ë¬¼í’ˆ
ì†ŒíŒŒ, ì¹¨ëŒ€, ì±…ì¥, ì‹íƒ ë“±

## â›” ë°°ì¶œ ë¶ˆê°€ëŠ¥ ë¬¼í’ˆ
ìœ ë¦¬, ì•¡ì²´ë¬¼ì§ˆ, ìœ„í—˜ë¬¼ ë“±

## ğŸšš ë°°ì¶œ ë°©ë²•
ë°°ì¶œ ì „ ì˜ˆì•½ í•„ìˆ˜. ëŒ€í˜•íê¸°ë¬¼ ì‹ ì²­ ì‹œìŠ¤í…œì—ì„œ ë°°ì¶œ ì˜ˆì•½

## ğŸ“… ìˆ˜ê±° ì¼ì •
í‰ì¼ 09:00~18:00, í† ìš”ì¼ 09:00~13:00 (ì¼ìš”ì¼ íœ´ë¬´)

## ğŸ“ ì‹ ì²­ ë°©ë²•

### ì˜¨ë¼ì¸
ë°°ì¶œì •ë³´ ê´€ë¦¬ ì‹œìŠ¤í…œ: https://example.com

### ì „í™”
02-1234-5678 (í‰ì¼ 09:00~18:00)

### ë°©ë¬¸
ê°•ë‚¨êµ¬ì²­ ëŒ€í˜•íê¸°ë¬¼ê³¼, ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ...

## ğŸ’° ê¸°ë³¸ ìˆ˜ìˆ˜ë£Œ
ë¬¼í’ˆë³„ë¡œ ìƒì´í•©ë‹ˆë‹¤. ìš”ê¸ˆí‘œ ì°¸ì¡°

## ğŸ‘¥ ì—°ë½ì²˜

- **ëŒ€í˜•íê¸°ë¬¼ ì‹ ì²­ì„¼í„°**: 02-1234-5678 (ë°°ì¶œ ì˜ˆì•½, ë¬¸ì˜)
- **ì˜¨ë¼ì¸ ì‹ ì²­ ì‹œìŠ¤í…œ**: https://example.com (ë°°ì¶œ ì˜ˆì•½)
- **ê°•ë‚¨êµ¬ì²­ ëŒ€í˜•íê¸°ë¬¼ê³¼**: ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ... (ë°©ë¬¸ ì‹ ì²­, ìƒë‹´)

## â° ìš´ì˜ ì‹œê°„
í‰ì¼ 09:00~18:00, í† ìš”ì¼ 09:00~13:00

## ğŸ“Œ ì¶”ê°€ ì •ë³´
ëŒ€í˜•íê¸°ë¬¼ì€ ë°˜ë“œì‹œ ì˜ˆì•½ í›„ ë°°ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.
```

### ìˆ˜ìˆ˜ë£Œ ì •ë³´ (fee) í˜•ì‹

```markdown
## ğŸ“ ë°°ì¶œ ê¸°ì¤€
ë¬¼í’ˆì˜ í¬ê¸°ì™€ ì¢…ë¥˜ì— ë”°ë¼ ìš”ê¸ˆì´ ê²°ì •ë©ë‹ˆë‹¤.

## ğŸ’µ ìš”ê¸ˆ í‘œ

### ì†ŒíŒŒ
- **í¬ê¸°**: 2ì¸ìš© ì´ìƒ â†’ **ìš”ê¸ˆ**: 18,000ì›~27,000ì›
- **í¬ê¸°**: 1ì¸ìš© â†’ **ìš”ê¸ˆ**: 9,000ì›~13,500ì›

### ì¹¨ëŒ€
- **í¬ê¸°**: ë”ë¸”/í€¸ â†’ **ìš”ê¸ˆ**: 13,500ì›~18,000ì›
- **í¬ê¸°**: ì‹±ê¸€ â†’ **ìš”ê¸ˆ**: 9,000ì›~13,500ì›

### ì±…ì¥
- **í¬ê¸°**: ëŒ€í˜•(1.5m ì´ìƒ) â†’ **ìš”ê¸ˆ**: 18,000ì›
- **í¬ê¸°**: ì¤‘í˜•(1m~1.5m) â†’ **ìš”ê¸ˆ**: 13,500ì›
- **í¬ê¸°**: ì†Œí˜•(1m ë¯¸ë§Œ) â†’ **ìš”ê¸ˆ**: 9,000ì›

## ğŸ“… ì˜ˆì•½ ë°©ë²•
ì˜¨ë¼ì¸ ë˜ëŠ” ì „í™”ë¡œ ì˜ˆì•½. ë°°ì¶œ 7ì¼ ì „ ì‹ ì²­ ê¶Œì¥

## ğŸ’³ ê²°ì œ ë°©ë²•
í˜„ì¥ ì¹´ë“œ/í˜„ê¸ˆ ê²°ì œ ê°€ëŠ¥

## ğŸ í• ì¸
- ë‹¤ëŸ‰ ë°°ì¶œ ì‹œ 10% í• ì¸
- í™˜ê²½ë¯¸í™”ì› í˜‘íšŒ íšŒì› 5% í• ì¸

## ğŸ“Œ ì¶”ê°€ ì •ë³´
ë³€ë™ë  ìˆ˜ ìˆìœ¼ë‹ˆ ê³µì‹ ì‚¬ì´íŠ¸ í™•ì¸ ê¶Œì¥
```

## ë³€ìˆ˜ ì£¼ì… ì‚¬ìš© ì˜ˆì‹œ

### 1. Pythonì—ì„œ ë³€ìˆ˜ ì£¼ì…

```python
from src.domains.infrastructure.services.detail_content_service import DetailContentService
from src.app.core.config import load_config

# ì„¸ë¶€ë‚´ì—­ ë¡œë“œ
config = load_config()
service = DetailContentService(config)

# ì§€ì—­ë³„ ë°°ì¶œì •ë³´ ë¡œë“œ
district_key = "ì„œìš¸íŠ¹ë³„ì‹œ_ê°•ë‚¨êµ¬"
info_detail = service.get_detail_content(district_key, "info")
fee_detail = service.get_detail_content(district_key, "fee")

# ë§ˆí¬ë‹¤ìš´ ì½˜í…ì¸  ì¶”ì¶œ
info_content = info_detail.get("content", "")  if info_detail else ""
fee_content = fee_detail.get("content", "")  if fee_detail else ""

# í…œí”Œë¦¿ì— ì£¼ì…
guidance_template = f"""
# {district_key} ëŒ€í˜•íê¸°ë¬¼ ë°°ì¶œ ì•ˆë‚´

{info_content}

## ìš”ê¸ˆ ì •ë³´

{fee_content}

---
ìµœì¢… ì—…ë°ì´íŠ¸: {info_detail.get('created_at', '')}
"""

print(guidance_template)
```

### 2. Streamlitì—ì„œ ë³€ìˆ˜ ì£¼ì…

```python
import streamlit as st
from src.domains.infrastructure.services.detail_content_service import DetailContentService
from src.app.core.config import load_config

config = load_config()
service = DetailContentService(config)

district_key = st.selectbox("ì§€ì—­ ì„ íƒ", ["ì„œìš¸íŠ¹ë³„ì‹œ_ê°•ë‚¨êµ¬", "ì¸ì²œê´‘ì—­ì‹œ_ì„œêµ¬"])

# ë°°ì¶œì •ë³´ì™€ ìˆ˜ìˆ˜ë£Œ ì •ë³´ ë¡œë“œ
info_detail = service.get_detail_content(district_key, "info")
fee_detail = service.get_detail_content(district_key, "fee")

if info_detail and fee_detail:
    # íƒ­ìœ¼ë¡œ ë‚˜ëˆ„ì–´ í‘œì‹œ
    tab1, tab2 = st.tabs(["ë°°ì¶œì •ë³´", "ìˆ˜ìˆ˜ë£Œ"])

    with tab1:
        st.markdown(info_detail.get("content", "ì •ë³´ ì—†ìŒ"))

    with tab2:
        st.markdown(fee_detail.get("content", "ì •ë³´ ì—†ìŒ"))
else:
    st.warning("ì„¸ë¶€ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
```

### 3. í…œí”Œë¦¿ ë¬¸ìì—´ í¬ë§·íŒ…

```python
# í”„ë¡¬í”„íŠ¸ë‚˜ í…œí”Œë¦¿ì—ì„œ ë³€ìˆ˜ë¡œ ì‚¬ìš©
DISPOSAL_GUIDANCE_TEMPLATE = """
# {district_name} ëŒ€í˜•íê¸°ë¬¼ ë°°ì¶œ ì•ˆë‚´

ì‚¬ìš©ìë‹˜ì´ ë°°ì¶œ ì˜ˆì •ì¸ ë¬¼í’ˆì— ëŒ€í•œ ë°°ì¶œ ì •ë³´ì…ë‹ˆë‹¤.

{disposal_info}

## ë°°ì¶œ ìš”ê¸ˆ

{fee_info}

---

ì¶”ê°€ ë¬¸ì˜ëŠ” ì§€ì—­ ì²­ì†Œê³¼ì— ì—°ë½ì£¼ì„¸ìš”.
"""

# ë°ì´í„° ì£¼ì…
guidance = DISPOSAL_GUIDANCE_TEMPLATE.format(
    district_name="ê°•ë‚¨êµ¬",
    disposal_info=info_content,
    fee_info=fee_content
)
```

## ì£¼ìš” íŠ¹ì§•

### âœ… ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ì¥ì 

1. **ê°€ë…ì„±**: êµ¬ì¡°í™”ëœ ë§ˆí¬ë‹¤ìš´ì€ ì‚¬ìš©ìê°€ ì½ê¸° ì‰¬ì›€
2. **ìœ ì—°ì„±**: Streamlitì˜ `st.markdown()`ìœ¼ë¡œ ë°”ë¡œ ë Œë”ë§ ê°€ëŠ¥
3. **í™•ì¥ì„±**: HTMLë¡œ ë³€í™˜í•˜ê±°ë‚˜ PDFë¡œ ë‚´ë³´ë‚´ê¸° ìš©ì´
4. **ì¼ê´€ì„±**: AIê°€ ìƒì„±í•œ ì½˜í…ì¸ ë¥¼ ì¼ì •í•œ í˜•ì‹ìœ¼ë¡œ ì €ì¥

### ğŸ“ ë©”íƒ€ë°ì´í„°

ê° í•­ëª©ì— ì €ì¥ë˜ëŠ” ë©”íƒ€ë°ì´í„°:

- `content`: ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ì‹¤ì œ ì½˜í…ì¸ 
- `created_at`: ìƒì„± ì¼ì‹œ (ISO 8601 í˜•ì‹)
- `source`: ë°ì´í„° ì¶œì²˜ (`ai_analyzed`, `manual`, `ai_generated` ë“±)

## í†µí•© ì›Œí¬í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì›¹í˜ì´ì§€ ì½˜í…ì¸      â”‚ (ì‚¬ìš©ìê°€ ë³µì‚¬)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DetailContentServiceâ”‚ (AI ë¶„ì„)
â”‚ generate_content()  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ ë³€í™˜  â”‚ (JSON â†’ Markdown)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì €ì¥ì†Œ ì €ì¥         â”‚ (detail_contents.json)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í…œí”Œë¦¿ì— ë³€ìˆ˜ ì£¼ì…  â”‚ (í–¥í›„ ì‚¬ìš©)
â”‚ ì‚¬ìš©ì ê°€ì´ë“œ ìƒì„±  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ (ì˜›ë‚  JSON í¬ë§·)

ê¸°ì¡´ JSON í˜•ì‹ì˜ ë°ì´í„°ëŠ” ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ìë™ ë³€í™˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í•„ìš”ì‹œ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ë™ìœ¼ë¡œ ì¬ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```python
# ë ˆê±°ì‹œ ë°ì´í„° í™•ì¸
service = DetailContentService(config)
old_detail = service.get_detail_content(district_key, "info")

# ë˜ê±°ì‹œ í˜•ì‹ì¸ì§€ í™•ì¸ ('content' í•„ë“œ ì—†ìŒ)
if old_detail and 'content' not in old_detail:
    print("ë ˆê±°ì‹œ í˜•ì‹ ë°ì´í„°ì…ë‹ˆë‹¤. ì¬ë¶„ì„ì„ ê¶Œì¥í•©ë‹ˆë‹¤.")
    # UIì—ì„œ 'ì¬ë¶„ì„' ë²„íŠ¼ìœ¼ë¡œ ì¬ì²˜ë¦¬
```

## í–¥í›„ ê°œì„ ì‚¬í•­

1. **ë³„ë„ MD íŒŒì¼ ì €ì¥**: ê° ì§€ì—­/íƒ€ì…ë³„ë¡œ ë³„ë„ì˜ `.md` íŒŒì¼ë¡œë„ ì €ì¥ ê°€ëŠ¥
2. **ë²„ì „ ê´€ë¦¬**: ë³€ê²½ ì´ë ¥ ì¶”ì  ë° ì´ì „ ë²„ì „ ë³µì›
3. **ë‹¤êµ­ì–´ ì§€ì›**: ì§€ì—­ë³„ ì–¸ì–´ë¡œ í…œí”Œë¦¿ ìƒì„±
4. **ìºì‹±**: ìì£¼ ì ‘ê·¼í•˜ëŠ” ì§€ì—­ ì •ë³´ì˜ ì„±ëŠ¥ ìµœì í™”

## ì°¸ê³  ìë£Œ

- **ì„œë¹„ìŠ¤**: `src/domains/infrastructure/services/detail_content_service.py`
- **UI**: `src/domains/infrastructure/ui/detail_content_ui.py`
- **í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿**: `src/domains/infrastructure/services/detail_content_prompts.py`
- **ì´ˆê¸°í™”**: `src/domains/infrastructure/services/detail_content_initialization.py`
